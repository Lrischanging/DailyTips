## 密码找回功能

### 前方案时序图

![](https://user-images.githubusercontent.com/36461763/95712033-9804a100-0c96-11eb-99ec-68a41412dd7b.png)

由于前期调研不充分，认为'忘记密码'一定要跳转网页，为了保证该页面的安全性以及代码中已有jwt的情况下，我们选择了：在邮件中发送修改密码链接（链接后拼接?token={jwt}）的方案。

缺点：拼接的链接太长

修改：前端页面采用不跳转的方式，可解决安全性问题。修改时验证改为和注册流程一致的邮箱验证码模式。

代码存在问题：

1. 注意代码复用，缩减冗余代码

2. sql语句中条件查询加入choose标签（ifelse），使得update过程少一次查询数据库的操作，提高性能

3. 代码不要强行复用，一个方法做一件明确的事情最好

4. 测试时要保证测试完整，每一步的去向都要确认。